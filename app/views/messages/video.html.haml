%html
  %head
    = javascript_include_tag 'jquery-1.4.2.min.js'
    = javascript_include_tag 'swfobject.js'
  %body
    %div.yt-container
      .hide-yt-logo
      #play-overlay
      #ytapiplayer
    
    %style
      :sass
        html, body
          :margin 0
          :padding 0
          
        .yt-container
          :width 425px
          :height 319px
          :position relative

        #play-overlay
          :width 100%
          :height 100%
          :position absolute
          :background-image url("/images/pause_screen_m_out.png")
          :z-index 100

        .hide-yt-logo
          :width 100%
          :height 100%
          :background transparent
          :position absolute
          :cursor auto
          :z-index 100
      
    :javascript

      function onYouTubePlayerReady() {
        ytplayer = document.getElementById("myytplayer");
        ytplayer.loadVideoById("#{@video_id}");
        ytplayer.pauseVideo();
      }

      $(function() {
        $(".yt-container").click(function() {
          var ytplayer = document.getElementById("myytplayer");
          // alert(ytplayer);
          if (ytplayer.getPlayerState() == 1) {
            // playing
            ytplayer.pauseVideo();
            $("#play-overlay").show();
          } else {
            // stoped
            $("#play-overlay").hide();
            ytplayer.playVideo();
          }
        })

        var params = { allowScriptAccess: "always" };
        var atts = { id: "myytplayer", style: "position: absolute;" };
        $(function() {
          swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", 
                             "ytapiplayer", "425", "319", "8", null, null, params, atts);
        })
      });